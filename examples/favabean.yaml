# cutadapt can initially filter sequences below a certain length out when a sequence is not expected to be meaningful
# These sequences will be written on disk but won't be used for downstream analyses
initial_filter:
     - 200

# Figaro expects all sequences to be of the same length, so cutting all sequences to a specific length is needed.
# This simplifies the Figaro analyses, and it helps remove sequences not expected to give you a meaningful hit to DADA2
# You can write a specific number you like (eg 100, for 100 basepairs), or, you can filter out sequences based on general parameters as below
# Default: is that if the length of sequences in Q1 is within 10% of Q2 (median), then use the Q1 to include the majority of sequences. Otherwise Q2 is used
# Q1: 25th percentile length
# Q2: 50th percentile length (median) 
# Q3: 75th percentile length
# max_len: longest sequence length
# This only accepts one value only. So if you have more than 1 uncommented, only the first one will be used0
trim_param:
     - default
#    - max_len
#    - Q1
#    - Q2
#    - Q3
#    - 100

# Figaro provides multiple options for the DADA2 parameters such highest coverage (retained % of sequences)
# Below you can mention which of these you want to proceed
# This only accepts one value only. So if you have more than 1 uncommented, only the first one will be used
figaro:
    - highest_coverage
#    - lowest_errors

# SIDLE multi-region 16S reconstruction parameters.
# SIDLE uses the SMURF EM algorithm to combine ASVs from multiple primer regions
# into a single unified count table, replacing per-region averaging.
# Automatically invoked when multiple primer regions are detected.
sidle:
  # Max mismatches allowed during k-mer alignment (ASVs to reference k-mers)
  max_mismatch: 5
  # Max mismatches allowed during in-silico PCR (primer matching to reference)
  primer_max_mismatch: 5
  # Minimum total read count per sample to include in EM reconstruction
  min_counts: 1000
  # Minimum relative abundance threshold for EM convergence
  min_abund: 1.0e-5
  # Region normalization strategy: uncomment the one you are interested in.
  # Only the first uncommented one will be selected.
  region_normalize:
    - average      # (Default) Divides each feature's reconstructed counts by the number of regions it was detected in, preventing over-counting of taxa present in multiple regions
#   - weighted     # Scales counts by (total_regions / regions_detected), so taxa found in fewer regions are scaled up relative to the total number of regions in the analysis
#   - unweighted   # No region normalization; raw EM-reconstructed counts are returned as-is regardless of how many regions a taxon appears in

taxonomy_database:
  eHOMD:
    use: True
    url: "https://zenodo.org/records/7380292/files/eHOMD_RefSeq_dada2_V15.22.fasta.gz"
    species: "https://zenodo.org/records/7380292/files/eHOMD_RefSeq_dada2_assign_species_V15.22.fasta.gz"
  silva:
    use: False
    url: "https://zenodo.org/records/4587955/files/silva_nr99_v138.1_wSpecies_train_set.fa.gz"
    species: "https://zenodo.org/records/4587955/files/silva_species_assignment_v138.1.fa.gz"
